I"‰H<p>æ·±åº¦å­¦ä¹ ç³»ç»Ÿç”¨Ubuntu 16.04ï¼Œæ˜¾å¡æ˜¯ä¸€å¼ nVidia GTS450ï¼Œä¸»è¦ç”¨æ¥åšç®€å•å®éªŒã€‚ç”¨æ¯”è¾ƒæ–°çš„nVidiaæ˜¾å¡é©±åŠ¨å’ŒCUDA8ã€‚</p>

<p><strong>è¯·çœ‹å®Œæ–‡ç« å†å°è¯•å“¦</strong></p>

<h1 id="æ·»åŠ ä¸‹è½½æº">æ·»åŠ ä¸‹è½½æº</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> /etc/apt/
<span class="nv">$ </span><span class="nb">sudo cp </span>sources.list sources.list.bak
<span class="nv">$ </span><span class="nb">sudo </span>vi sources.list 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æŠŠæºæ·»åŠ åˆ°æ–‡ä»¶å‰é¢ï¼Œä¿å­˜</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>deb http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ›´æ–°ä¸€ä¸‹</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt-get update
<span class="nv">$ </span><span class="nb">sudo </span>apt-get upgrade
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ·»åŠ æ˜¾å¡é©±åŠ¨çš„PPA</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository ppa:graphics-drivers/ppa
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç„¶åæ˜¾ç¤ºä¸‹åˆ—ä¿¡æ¯</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="rouge-code"><pre>Fresh drivers from upstream, currently shipping Nvidia.

<span class="c">## Current Status</span>

Current official release: <span class="sb">`</span>nvidia-370<span class="sb">`</span> <span class="o">(</span>370.28<span class="o">)</span>
Current long-lived branch release: <span class="sb">`</span>nvidia-367<span class="sb">`</span> <span class="o">(</span>367.57<span class="o">)</span>

For GeForce 8 and 9 series GPUs use <span class="sb">`</span>nvidia-340<span class="sb">`</span> <span class="o">(</span>340.98<span class="o">)</span>
For GeForce 6 and 7 series GPUs use <span class="sb">`</span>nvidia-304<span class="sb">`</span> <span class="o">(</span>304.132<span class="o">)</span>

<span class="c">## What we're working on right now:</span>

- Normal driver updates
- Help Wanted: Mesa Updates <span class="k">for </span>Intel/AMD <span class="nb">users</span>, ping us <span class="k">if </span>you want to <span class="nb">help </span><span class="k">do </span>this work, we<span class="s1">'re shorthanded.

## WARNINGS:

This PPA is currently in testing, you should be experienced with packaging before you dive in here:

Volunteers welcome! See also: https://github.com/mamarley/nvidia-graphics-drivers/

### How you can help:

## Install PTS and benchmark your gear:

Â Â Â Â sudo apt-get install phoronix-test-suite

Run the benchmark:

Â Â Â Â phoronix-test-suite default-benchmark openarena xonotic tesseract gputest unigine-valley

and then say yes when it asks you to submit your results to openbechmarking.org. Then grab a cup of coffee, it takes a bit for the benchmarks to run. Depending on the version of Ubuntu you'</span>re using it might preferable <span class="k">for </span>you to grabs PTS from upstream directly: http://www.phoronix-test-suite.com/?k<span class="o">=</span>downloads

<span class="c">## Share your results with the community:</span>

Post a <span class="nb">link </span>to your results <span class="o">(</span>or any other feedback to<span class="o">)</span>: https://launchpad.net/~graphics-drivers-testers

Remember to rerun and resubmit the benchmarks after driver upgrades, this will allow us to gather a bunch of data on performance that we can share with everybody.

If you run into old documentation referring to other PPAs, you can <span class="nb">help </span>us by consolidating references to this PPA.

If someone wants to go ahead and start prototyping on <span class="sb">`</span>software-properties-gtk<span class="sb">`</span> on what the GUI should look like, please start hacking!

<span class="c">## Help us Help You!</span>

We use the donation funds to get the developers hardware to <span class="nb">test </span>and upload these drivers, please consider donating to the <span class="s2">"community"</span> slider on the donation page <span class="k">if </span>you<span class="s1">'re loving this PPA:

http://www.ubuntu.com/download/desktop/contribute
 More info: https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa
Press [ENTER] to continue or ctrl-c to cancel adding it
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>åœ¨è¿™é‡Œå›è½¦ç¡®è®¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>gpg: keyring <span class="sb">`</span>/tmp/tmp_4l44wuj/secring.gpg<span class="s1">' created
gpg: keyring `/tmp/tmp_4l44wuj/pubring.gpg'</span> created
gpg: requesting key 1118213C from hkp server keyserver.ubuntu.com
gpg: /tmp/tmp_4l44wuj/trustdb.gpg: trustdb created
gpg: key 1118213C: public key <span class="s2">"Launchpad PPA for Graphics Drivers Team"</span> imported
gpg: Total number processed: 1
gpg:               imported: 1  <span class="o">(</span>RSA: 1<span class="o">)</span>
OK
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¸‹é¢å°±å¯ä»¥å¼€å§‹å®‰è£…æ˜¾å¡é©±åŠ¨äº†ï¼Œä¸‹è½½é€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt-get update
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-367
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>mesa-common-dev
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>freeglut3-dev 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>é©±åŠ¨å®‰è£…å®Œæˆä¸€å®šè¦é‡å¯ç³»ç»Ÿ</p>

<h1 id="ä¸‹è½½å¹¶å®‰è£…cuda">ä¸‹è½½å¹¶å®‰è£…CUDA</h1>

<p>è¿›å…¥<a href="https://developer.nvidia.com/cuda-release-candidate-download">CUDAå®˜ç½‘</a>ï¼Œæ³¨å†Œå¹¶ç™»é™†è´¦å·ï¼ŒæŒ‰ç…§ä¸‹å›¾é…ç½®ä¸‹è½½Ubuntuçš„å®‰è£…æ–‡ä»¶ï¼Œæ–‡ä»¶çº¦1.4GBã€‚</p>

<p><img src="/img/cuda.png" alt="img" /></p>

<p>ä¸‹è½½å®Œæˆè¿›å…¥ä¸‹è½½ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤è§£å‹åˆ°ä¸´æ—¶æ–‡ä»¶å¹¶å®‰è£…ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo mkdir</span> /opt/temp
<span class="nv">$ </span><span class="nb">sudo </span>sh cuda_8.0.44_linux.run <span class="nt">--tmpdir</span><span class="o">=</span>/opt/temp/ 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å®‰è£…åè®®å¯ä»¥ä½¿ç”¨<code class="highlighter-rouge">q</code>è·³è¿‡ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜è¯¢é—®æ˜¯å¦å®‰è£…é©±åŠ¨ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»å®‰è£…é©±åŠ¨ï¼Œæ‰€ä»¥é€‰æ‹©ä¸å®‰è£…ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>....
....

Do you accept the previously <span class="nb">read </span>EULA?
accept/decline/quit:accept

Install NVIDIA Accelerated Graphics Driver <span class="k">for </span>Linux-x86_64 367.48?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: n
</pre></td></tr></tbody></table></code></pre></div></div>

<p>é—®é¢˜é€‰æ‹©<code class="highlighter-rouge">y</code>ï¼Œè¯¢é—®è·¯å¾„å›è½¦é»˜è®¤è®¾ç½®ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>Install the CUDA 8.0 Toolkit?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Enter Toolkit Location
 <span class="o">[</span> default is /usr/local/cuda-8.0 <span class="o">]</span>: y

Toolkit location must be an absolute path.
Enter Toolkit Location
 <span class="o">[</span> default is /usr/local/cuda-8.0 <span class="o">]</span>: 

Do you want to <span class="nb">install </span>a symbolic <span class="nb">link </span>at /usr/local/cuda?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Install the CUDA 8.0 Samples?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Enter CUDA Samples Location
 <span class="o">[</span> default is /home/mike <span class="o">]</span>: 

Installing the CUDA Toolkit <span class="k">in</span> /usr/local/cuda-8.0 ...
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™é‡Œæ ¹æ®ä¸åŒç³»ç»Ÿä¼šæœ‰2ä¸ªæˆ–4ä¸ªæ–‡ä»¶ç¼ºå¤±ï¼Œä¸‹é¢æ˜¾ç¤ºç¼ºäº†ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>Missing recommended library: libXi.so
Missing recommended library: libXmu.so
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä½¿ç”¨aptè¡¥å…¨æ–‡ä»¶ï¼Œå‚è€ƒè‡ª <a href="http://stackoverflow.com/questions/22360771/missing-recommended-library-libglu-so">stackoverflow</a>ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-modprobe freeglut3-dev libx11-dev libxmu-dev libxi-dev libglu1-mesa-dev
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å®‰è£…å®Œæˆè¦<code class="highlighter-rouge">é‡å¯ç³»ç»Ÿ</code>å†é‡æ–°å®‰è£…CUDAåŒ…ï¼Œæ­£å¸¸çš„è¯å°±ä¸ä¼šæ˜¾ç¤ºæ–‡ä»¶ç¼ºå¤±ï¼Œç»§ç»­å®‰è£…æˆåŠŸã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>Installing the CUDA Samples <span class="k">in</span> /home/textminer ...
Installing the CUDA Samples <span class="k">in</span> /home/mike ...
Copying samples to /home/mike/NVIDIA_CUDA-8.0_Samples now...
Finished copying samples.

<span class="o">===========</span>
<span class="o">=</span> Summary <span class="o">=</span>
<span class="o">===========</span>

Driver:   Not Selected
Toolkit:  Installed <span class="k">in</span> /usr/local/cuda-8.0
Samples:  Installed <span class="k">in</span> /home/mike, but missing recommended libraries

Please make sure that
 -   PATH includes /usr/local/cuda-8.0/bin
 -   LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as root

To uninstall the CUDA Toolkit, run the uninstall script <span class="k">in</span> /usr/local/cuda-8.0/bin

Please see CUDA_Installation_Guide_Linux.pdf <span class="k">in</span> /usr/local/cuda-8.0/doc/pdf <span class="k">for </span>detailed information on setting up CUDA.

<span class="k">***</span>WARNING: Incomplete installation! This installation did not <span class="nb">install </span>the CUDA Driver. A driver of version at least 361.00 is required <span class="k">for </span>CUDA 8.0 functionality to work.
To <span class="nb">install </span>the driver using this installer, run the following <span class="nb">command</span>, replacing &lt;CudaInstaller&gt; with the name of this run file:
    <span class="nb">sudo</span> &lt;CudaInstaller&gt;.run <span class="nt">-silent</span> <span class="nt">-driver</span>

Logfile is /opt/temp//cuda_install_2299.log
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å®‰è£…å®Œæ¯•åå£°æ˜ç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶å†™å…¥<code class="highlighter-rouge">~/.bashrc</code>æœ€å</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>export PATH=/usr/local/cuda-8.0/bin${PATH:+:${PATH}}export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}} 
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>ä½¿ç”¨<code class="highlighter-rouge">nvidia-smi</code>æ£€æŸ¥æ˜¾å¡çŠ¶å†µã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>mike@mike-P5Q-PRO:~/NVIDIA_CUDA-8.0_Samples<span class="nv">$ </span>nvidia-smi
Fri Nov 25 17:07:01 2016
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|<span class="o">===============================</span>+<span class="o">======================</span>+<span class="o">======================</span>|
|   0  GeForce GTS 450     Off  | 0000:01:00.0     N/A |                  N/A |
| 40%   35C   P12    N/A /  N/A |    225MiB /   962MiB |     N/A      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID  Type  Process name                               Usage      |
|<span class="o">=============================================================================</span>|
|    0                  Not Supported                                         |
+-----------------------------------------------------------------------------+
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æµ‹è¯•æ˜¾å¡å¸¦å®½ï¼Œä½¿ç”¨ä¹‹å‰å…ˆæŠŠæ–‡ä»¶ç”¨<code class="highlighter-rouge">make</code>ç¼–è¯‘</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre>mike@mike-P5Q-PRO:~/NVIDIA_CUDA-8.0_Samples/1_Utilities/bandwidthTest<span class="nv">$ </span>./bandwidthTest 
<span class="o">[</span>CUDA Bandwidth Test] - Starting...
Running on...

 Device 0: GeForce GTS 450
 Quick Mode

 Host to Device Bandwidth, 1 Device<span class="o">(</span>s<span class="o">)</span>
 PINNED Memory Transfers
   Transfer Size <span class="o">(</span>Bytes<span class="o">)</span>	Bandwidth<span class="o">(</span>MB/s<span class="o">)</span>
   33554432			5390.0

 Device to Host Bandwidth, 1 Device<span class="o">(</span>s<span class="o">)</span>
 PINNED Memory Transfers
   Transfer Size <span class="o">(</span>Bytes<span class="o">)</span>	Bandwidth<span class="o">(</span>MB/s<span class="o">)</span>
   33554432			5935.1

 Device to Device Bandwidth, 1 Device<span class="o">(</span>s<span class="o">)</span>
 PINNED Memory Transfers
   Transfer Size <span class="o">(</span>Bytes<span class="o">)</span>	Bandwidth<span class="o">(</span>MB/s<span class="o">)</span>
   33554432			43900.2

Result <span class="o">=</span> PASS

NOTE: The CUDA Samples are not meant <span class="k">for </span>performance measurements. Results may vary when GPU Boost is enabled.
</pre></td></tr></tbody></table></code></pre></div></div>

:ET