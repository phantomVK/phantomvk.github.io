I"æ<p>ä»Android 6.0ç‰ˆæœ¬å¼€å§‹ï¼Œç³»ç»Ÿå¯ç”¨æ›´åŠ ä¸¥æ ¼çš„æƒé™ç®¡ç†ï¼Œéƒ¨åˆ†é‡è¦æƒé™åªèƒ½åœ¨è¿è¡Œè¿‡ç¨‹ç”±ç”¨æˆ·æˆæƒï¼Œæ— æ³•é€šè¿‡å£°æ˜è·å¾—ã€‚å¦‚READ_PHONE_STATEè¿™ç§æƒé™ï¼Œå³ä½¿åœ¨AndroidManifestä¸­å·²ç»å£°æ˜ï¼Œå¦‚æœæ—¢æ²¡æœ‰åœ¨è¿è¡Œæ—¶å‘ç”¨æˆ·è¯·æ±‚ï¼Œåˆæ²¡æœ‰åšç›¸åº”å¤„ç†ï¼Œå°±ä¼šå¯¼è‡´åº”ç”¨é—ªé€€ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre>java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x4000010 (has extras) }
      in com.quanshi.tang.network.NetworkUtils$ConnectReceiver@2a526a5
            at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:1235)
            at android.os.Handler.handleCallback(Handler.java:761)
            at android.os.Handler.dispatchMessage(Handler.java:98)
            at android.os.Looper.loop(Looper.java:156)
            at android.app.ActivityThread.main(ActivityThread.java:6585)
            at java.lang.reflect.Method.invoke(Native Method)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)
      Caused by: java.lang.SecurityException: getSubscriberId: Neither user 10190 nor current process has android.permission.READ_PHONE_STATE.
            at android.os.Parcel.readException(Parcel.java:1665)
            at android.os.Parcel.readException(Parcel.java:1618)
            at com.android.internal.telephony.IPhoneSubInfo$Stub$Proxy.getSubscriberIdForSubscriber(IPhoneSubInfo.java:590)
            at android.telephony.TelephonyManager.getSubscriberId(TelephonyManager.java:2208)
            at android.telephony.TelephonyManager.getSubscriberId(TelephonyManager.java:2189)
            at com.quanshi.tang.network.NetworkUtils.getProvidersName(Unknown Source)
            at com.quanshi.tang.network.NetworkUtils.getNetworkInfo(Unknown Source)
            at com.quanshi.tang.network.NetworkUtils.connectChanged(Unknown Source)
            at com.quanshi.tang.network.NetworkUtils.access$100(Unknown Source)
            at com.quanshi.tang.network.NetworkUtils$ConnectReceiver.onReceive(Unknown Source)
            at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:1222)
            at android.os.Handler.handleCallback(Handler.java:761)Â 
            at android.os.Handler.dispatchMessage(Handler.java:98)Â 
            at android.os.Looper.loop(Looper.java:156)Â 
            at android.app.ActivityThread.main(ActivityThread.java:6585)Â 
            at java.lang.reflect.Method.invoke(Native Method)Â 
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)Â 
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)Â 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä½†apkå¯é€šè¿‡build.gradleçš„targetSDKè¡¨æ˜æœ€é«˜æ”¯æŒçš„ç³»ç»Ÿç‰ˆæœ¬ã€‚å·²çŸ¥æ–°çš„æƒé™ç³»ç»Ÿåªåœ¨Android 6.0(23)åŠä»¥ä¸Šçš„ç³»ç»Ÿæœ‰æ•ˆï¼Œé‚£æŠŠtargetSDKè®¾ç½®å°äºç­‰äº22å³å¯é¿å¼€æ–°çš„æƒé™ç®¡ç†ã€‚</p>

:ET